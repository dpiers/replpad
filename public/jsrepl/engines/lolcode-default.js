(function(){this.LOLCoffee={KEYWORDS:"IF U SAY SO,IM OUTTA YR,QUOSHUNT OF,PRODUKT OF,BOTH SAEM,EITHER OF,HOW DUZ I,SMALLR OF,BIGGR OF,CHARZ OF,DIFFRINT,FOUND YR,IM IN YR,IS NOW A,LENGZ OF,BOTH OF,DIFF OF,I HAS A,KTHXBYE,ORDZ OF,VISIBLE,ALL OF,ANY OF,BUKKIT,GIMMEH,MOD OF,NERFIN,NUMBAR,NO WAI,O RLY?,OMGWTF,SMOOSH,SUM OF,WON OF,YA RLY,MEBBE,NUMBR,TROOF,UPPIN,FAIL,GTFO,INTA,MAEK,MKAY,NOOB,PUTZ,WILE,WTF?,YARN,HAI,ITZ,NOT,OIC,OMG,TIL,WIN,AN,AT,YR,!,A,R".split(","),UNARY_OPERATORS:["NOT","LENGZ OF","CHARZ OF",
"ORDZ OF"],BINARY_OPERATORS:"SUM OF,DIFF OF,PRODUKT OF,QUOSHUNT OF,MOD OF,BIGGR OF,SMALLR OF,BOTH OF,EITHER OF,WON OF,BOTH SAEM,DIFFRINT".split(","),INFINITARY_OPERATORS:["ALL OF","ANY OF","SMOOSH"],DEFAULT_VALUES:{YARN:"",NUMBR:0,NUMBAR:0,TROOF:false,NOOB:null}}}).call(this);
(function(){var e,w,j,x,v,n,t,u,s,i,a,d,h,q,y,F,p,B,g,C,A,G,D,l,H,I,J,r,K,L,M,N,O,k,m,b,c,o,P,Q={}.hasOwnProperty,z=function(a,f){function c(){this.constructor=a}for(var b in f)Q.call(f,b)&&(a[b]=f[b]);c.prototype=f.prototype;a.prototype=new c;a.__super__=f.prototype;return a};a=this.LOLCoffee.DEFAULT_VALUES;l=function(a){function f(f){this.message=f+"."}z(f,a);f.prototype.name="MachineError";return f}(Error);o=function(){function c(f,a){this.type=f;this.value=a}c.prototype.equal=function(f){var a,
c;return((a=this.type)==="float"||a==="int")&&((c=f.type)==="float"||c==="int")?this.value===f.value:this.type===f.type?this.value===f.value:false};c.prototype.cast=function(f,b){var E;b==null&&(b=false);if(f==="null")throw new l("Cannot cast to NOOB");E=null;switch(this.type){case "null":if(b){if(!(f in a))throw new l("Unknown type: "+f);E=a[f]}else{if(f!=="bool")throw new l("Cannot implicitly cast NOOB to "+f);E=false}break;case "bool":E=function(){switch(f){case "bool":return this.value;case "int":case "float":return Number(this.value);
case "string":return this.value?"WIN":"FAIL";default:throw new l("Unknown type: "+f);}}.call(this);break;case "int":E=function(){switch(f){case "bool":return this.value!==0;case "int":case "float":return this.value;case "string":return String(this.value);default:throw new l("Unknown type: "+f);}}.call(this);break;case "float":E=function(){switch(f){case "bool":return this.value!==0;case "int":return Math.floor(this.value);case "float":return this.value;case "string":return String(this.value);default:throw new l("Unknown type: "+
f);}}.call(this);break;case "string":E=function(){switch(f){case "bool":return this.value!=="";case "int":if(!/^-?\d+$/.test(this.value))throw new l("Cannot parse NUMBR from '"+this.value+"'");return parseInt(this.value,10);case "float":if(!/^-?(\d+(\.\d*)?|\.\d+)$/.test(this.value))throw new l("Cannot parse NUMBAR from '"+this.value+"'");return parseFloat(this.value);case "string":return this.value;default:throw new l("Unknown type: "+f);}}.call(this);break;default:throw new l("Unknown type: "+this.type);
}return new c(f,E)};return c}();y=function(){return function(a,f){this.name=a;this.instruction_ptr=f;this.variables={};this.stack=[]}}();g=function(){function a(){}a.prototype.exec=function(f){f.halted=true;return f.done()};return a}();G=function(){function a(f){this.label=f}a.prototype.exec=function(f){return f.instruction_ptr=f.labels[this.label]};return a}();D=function(){function a(f){this.label=f}a.prototype.exec=function(f){if(f.getStack().pop().value===false)return f.instruction_ptr=f.labels[this.label]};
return a}();d=function(){function a(f,c){this.name=f;this.label=c}a.prototype.exec=function(f){return f.functions[this.name]=f.labels[this.label]};return a}();h=function(){function a(f){this.identifier=f}a.prototype.exec=function(f){if(this.identifier==="IT")throw new l("Cannot declare the special variable IT");return f.frames.slice(-1)[0].variables[this.identifier]=new o("null",null)};return a}();v=function(){function a(f){this.identifier=f}a.prototype.exec=function(f){var a,c,b;a=f.frames[0].variables;
c=f.frames.slice(-1)[0].variables;b=f.getStack().pop();if(this.identifier in c)return c[this.identifier]=b;else if(this.identifier in a)return a[this.identifier]=b;else if(f.auto_declare)return c[this.identifier]=b;else throw new l("Assignment to undefined variable: "+this.identifier);};return a}();n=function(){function a(f){this.identifier=f}a.prototype.exec=function(f){var a,c,b;c=f.frames[0].variables;a=f.frames.slice(-1)[0].variables;if(this.identifier in a)c=a;else if(!(this.identifier in c))if(f.auto_declare)c=
a;else throw new l("Assignment to undefined variable: "+this.identifier);a=c[this.identifier];b=f.getStack().pop();f=f.getStack().pop();if(a.type!=="string")throw new l("Can only index YARNs, not "+a.type);if(b.type!=="int")throw new l("Can only index using NUMBRs, not "+b.type);if(b.value>=a.value.length)throw new l("Out of bounds: '"+a.value+"'["+b.value+"]");if(f.type!=="string"||f.value.length!==1)throw new l("Can only assign single-character YARNs to YARN indices, not "+f.value);a=a.value;f=
a.slice(0,b.value)+f.value+a.slice(b.value+1);return c[this.identifier]=new o("string",f)};return a}();C=function(){function a(){}a.prototype.exec=function(f){f.pause();return f.input()};return a}();L=function(){function a(){}a.prototype.exec=function(f){f.pause();return f.output(f.getStack().pop().value)};return a}();N=function(){function a(){}a.prototype.exec=function(f){var a;a=(a=f.syscall_result)?String(a):"";return f.getStack().push(new o("string",a))};return a}();O=function(){function a(f){this.identifier=
f}a.prototype.exec=function(f){var a,c;a=f.frames[0].variables;c=f.frames.slice(-1)[0].variables;if(this.identifier in c)a=c[this.identifier];else if(this.identifier in a)a=a[this.identifier];else throw new l("Reference to undefined variable: "+this.identifier);return f.getStack().push(a)};return a}();p=function(){function a(){}a.prototype.exec=function(a){var c,b;c=a.getStack().pop();b=a.getStack().pop();if(c.type!=="string")throw new l("Can only index YARNs, not "+c.type);if(b.type!=="int")throw new l("Can only index using NUMBRs, not "+
b.type);if(b.value>=c.value.length)throw new l("Out of bounds: '"+c.value+"'["+b.value+"]");return a.getStack().push(new o("string",c.value[b.value]))};return a}();M=function(){function a(f,c){this.type=f;this.value=c}a.prototype.exec=function(a){return a.getStack().push(new o(this.type,this.value))};return a}();s=function(){function a(f,c){this.type=f;this.explicit=c!=null?c:false}a.prototype.exec=function(a){return a.getStack().push(a.getStack().pop().cast(this.type,this.explicit))};return a}();
u=function(){function a(f,c){this.func_name=f;this.args_count=c}a.prototype.exec=function(a){var c,b,g;c=a.getStack();a.frames.push(new y(this.func_name,a.instruction_ptr));for(b=0,g=this.args_count;0<=g?b<g:b>g;0<=g?++b:--b)a.getStack().push(c.pop());return a.instruction_ptr=a.functions[this.func_name]};return a}();k=function(){function a(){}a.prototype.exec=function(a){var c,b;b=a.getStack().pop();c=a.frames.pop();a.instruction_ptr=c.instruction_ptr;return a.getStack().push(b)};return a}();w=function(){function a(f){this.args_count=
f}a.prototype.exec=function(a){var c,b,g,d,m;m=[];for(c=0,b=this.args_count;0<=b?c<b:c>b;0<=b?++c:--c)m.push(a.getStack().pop().cast("bool").value);b=true;for(g=0,d=m.length;g<d;g++)if(c=m[g],!c){b=false;break}return a.getStack().push(new o("bool",b))};return a}();x=function(){function a(f){this.args_count=f}a.prototype.exec=function(a){var c,b,g,d,m;m=[];for(c=0,b=this.args_count;0<=b?c<b:c>b;0<=b?++c:--c)m.push(a.getStack().pop().cast("bool").value);b=false;for(g=0,d=m.length;g<d;g++)if(c=m[g]){b=
true;break}return a.getStack().push(new o("bool",b))};return a}();i=function(){function a(c){this.args_count=c}a.prototype.exec=function(a){var c,b,g;g=[];for(c=0,b=this.args_count;0<=b?c<b:c>b;0<=b?++c:--c)g.push(a.getStack().pop().cast("string").value);return a.getStack().push(new o("string",g.join("")))};return a}();j=function(){function a(){}a.prototype.exec=function(a,c){var b,g,d;b=a.getStack().pop();g=a.getStack().pop();d="float"===b.type||"float"===g.type?"float":"int";b=b.cast(d).value;g=
g.cast(d).value;b=c(b,g);d==="int"&&(b=Math.floor(b));return a.getStack().push(new o(d,b))};return a}();e=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}z(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a+c})};return c}(j);m=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}z(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a-c})};return c}(j);r=function(a){function c(){return c.__super__.constructor.apply(this,
arguments)}z(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a*c})};return c}(j);q=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}z(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a/c})};return c}(j);J=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}z(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a%c})};return c}(j);
H=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}z(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a>c?a:c})};return c}(j);I=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}z(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a<c?a:c})};return c}(j);t=function(){function a(){}a.prototype.exec=function(a,c){var b,g;b=a.getStack().pop().cast("bool").value;g=
a.getStack().pop().cast("bool").value;return a.getStack().push(new o("bool",c(b,g)))};return a}();j=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}z(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a&&c})};return c}(t);K=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}z(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a||c})};return c}(t);P=function(a){function c(){return c.__super__.constructor.apply(this,
arguments)}z(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a^c})};return c}(t);t=function(){function a(){}a.prototype.exec=function(a){var c,b;c=a.getStack().pop();b=a.getStack().pop();return a.getStack().push(new o("bool",c.equal(b)))};return a}();c=function(){function a(){}a.prototype.exec=function(a){var c,b;c=a.getStack().pop();b=a.getStack().pop();return a.getStack().push(new o("bool",!c.equal(b)))};return a}();A=function(){function a(){}a.prototype.exec=
function(a){var c;c=a.getStack().pop().cast("bool").value;return a.getStack().push(new o("bool",!c))};return a}();B=function(){function a(){}a.prototype.exec=function(a){var c;c=a.getStack().pop();if(c.type!=="string")throw new l("Can only get length of YARNs");return a.getStack().push(new o("int",c.value.length))};return a}();F=function(){function a(){}a.prototype.exec=function(a){var c;c=a.getStack().pop();if(c.type!=="int")throw new l("Character codes must be NUMBRs, not "+c.type);c=String.fromCharCode(c.value);
return a.getStack().push(new o("string",c))};return a}();b=function(){function a(){}a.prototype.exec=function(a){var c;c=a.getStack().pop();if(c.type!=="string"||!c.value.length)throw new l("Can only take character code of non-empty "+("YARNs, not '"+c.type+"'"));return a.getStack().push(new o("int",c.value.charCodeAt(0)))};return a}();this.LOLCoffee.Machine=function(){function a(c,b,g,d,o,m){var e=this;this.context=c;this.input=b;this.output=g;this.error=d;this.done=o;this.auto_declare=m;this.instructions=
this.context.instructions;this.labels=this.context.labels;this.reset();this.input=this.input||function(){return e.resume()};this.output=this.output||function(){return e.resume()};this.error=this.error||function(){};this.done=this.done||function(){};this.auto_declare=this.auto_declare||false}a.prototype.reset=function(){this.instruction_ptr=0;this.frames=[new y("{MAIN}",0)];this.frames[0].variables.IT=new o("null",null);this.functions={};this.halted=true;this.blocked=false;return this.syscall_result=
null};a.prototype.step=function(){if(this.blocked||this.halted||this.instruction_ptr>=this.instructions.length)throw new l("Cannot execute while blocked, halted or at end");try{return this.instructions[this.instruction_ptr++].exec(this)}catch(a){return this.error(a),this.halted=true}};a.prototype.run=function(){var a;this.halted=false;for(a=[];!this.blocked&&!this.halted;)a.push(this.step());return a};a.prototype.pause=function(){return this.blocked=true};a.prototype.resume=function(a){a==null&&(a=
null);this.syscall_result=a;this.blocked=false;if(!this.halted)return this.run()};a.prototype.getStack=function(){return this.frames[this.frames.length-1].stack};return a}();this.LOLCoffee.MachineError=l;this.LOLCoffee.Instructions={Halt:g,PushLiteral:M,DeclareFunction:d,Jump:G,DeclareVariable:h,Assign:v,AssignAtIndex:n,Return:k,Input:C,PushSyscallResult:N,Output:L,PushVariable:O,GetIndex:p,Cast:s,JumpIfZero:D,Call:u,All:w,Any:x,Concat:i,Add:e,Subtract:m,Multiply:r,Divide:q,Modulo:J,Max:H,Min:I,And:j,
Or:K,Xor:P,Equal:t,Unequal:c,Invert:A,GetLength:B,FromCharCode:F,ToCharCode:b}}).call(this);
(function(){var e,w,j,x,v,n,t,u,s,i,a,d,h,q,y,F,p,B,g,C,A,G,D,l,H,I,J,r,K,L,M,N,O={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var g in b)O.call(b,g)&&(a[g]=b[g]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};g=this.LOLCoffee.Instructions;u=function(a){function b(a){this.message=a}k(b,a);b.prototype.name="CodeGenError";return b}(Error);t=function(){function a(){this.instructions=[];this.labels=[];this._break_stack=[]}a.prototype.emit=function(a){return this.instructions.push(a)};
a.prototype.newLabel=function(){this.labels.push(null);return this.labels.length-1};a.prototype.emitLabel=function(a){if(a>=this.labels.length)throw new u("Unknown label ("+a+"). Top: "+this.labels.length);return this.labels[a]=this.instructions.length};a.prototype.getBreakLabel=function(){return this._break_stack[this._break_stack.length-1]};a.prototype.popBreakLabel=function(){return this._break_stack.pop()};a.prototype.pushBreakLabel=function(a){return this._break_stack.push(a)};return a}();D=
function(){return function(){}}();I=function(a){function b(a){this.body=a}k(b,a);b.prototype.codegen=function(a){this.body.codegen(a);return a.emit(new g.Halt)};return b}(D);h=function(a){function b(a,b,g){this.name=a;this.args=b;this.body=g}k(b,a);b.prototype.codegen=function(a){var b,d,e,m,h;b=a.newLabel();d=a.newLabel();a.emit(new g.DeclareFunction(this.name,b));a.emit(new g.Jump(d));a.emitLabel(b);this.args.reverse();h=this.args;for(e=0,m=h.length;e<m;e++)b=h[e],a.emit(new g.DeclareVariable(b)),
a.emit(new g.Assign(b));this.body.codegen(a);return a.emitLabel(d)};return b}(D);r=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}k(b,a);return b}(D);J=function(a){function b(a){this.value=a}k(b,a);b.prototype.codegen=function(a){this.value.codegen(a);return a.emit(new g.Return)};return b}(r);B=function(a){function b(a){this.identifier=a}k(b,a);b.prototype.codegen=function(a){a.emit(new g.Input);a.emit(new g.PushSyscallResult);return a.emit(new g.Assign(this.identifier))};
return b}(r);H=function(a){function b(a){this.expression=a}k(b,a);b.prototype.codegen=function(a){this.expression.codegen(a);return a.emit(new g.Output)};return b}(r);i=function(a){function b(a){this.identifier=a}k(b,a);b.prototype.codegen=function(a){return a.emit(new g.DeclareVariable(this.identifier))};return b}(r);e=function(a){function b(a,b){this.identifier=a;this.value=b}k(b,a);b.prototype.codegen=function(a){this.value.codegen(a);return a.emit(new g.Assign(this.identifier))};return b}(r);
y=function(a){function b(a,b,g){this.identifier=a;this.index=b;this.value=g}k(b,a);b.prototype.codegen=function(a){this.value.codegen(a);this.index.codegen(a);return a.emit(new g.AssignAtIndex(this.identifier))};return b}(r);x=function(a){function b(){}k(b,a);b.prototype.codegen=function(a){return a.emit(new g.Jump(a.getBreakLabel()))};return b}(r);K=function(a){function b(a){this.statements=a}k(b,a);b.prototype.codegen=function(a){var b,g,d,e,h;e=this.statements;h=[];for(g=0,d=e.length;g<d;g++)b=
e[g],h.push(b.codegen(a));return h};return b}(r);s=function(a){function b(a,b){this.then_body=a;this.else_body=b}k(b,a);b.prototype.codegen=function(a){var b,d;b=a.newLabel();d=a.newLabel();a.emit(new g.PushVariable("IT"));a.emit(new g.Cast("bool"));a.emit(new g.JumpIfZero(b));this.then_body.codegen(a);a.emit(new g.Jump(d));a.emitLabel(b);this.else_body&&this.else_body.codegen(a);return a.emitLabel(d)};return b}(r);M=function(a){function b(a,b){this.cases=a;this.default_case=b}k(b,a);b.prototype.codegen=
function(a){var b,d,e,h,m,f,i,C,q;f=this.cases;for(m=0,e=f.length;m<e;m++)d=f[m],d.push(a.newLabel());this.default_case&&(h=a.newLabel());d=a.newLabel();C=this.cases;for(f=0,i=C.length;f<i;f++)b=C[f],e=b[0],m=b[2],e.codegen(a),a.emit(new g.PushVariable("IT")),a.emit(new g.Unequal),a.emit(new g.JumpIfZero(m));this.default_case&&a.emit(new g.Jump(h));a.pushBreakLabel(d);i=this.cases;for(e=0,f=i.length;e<f;e++)q=i[e],b=q[1],m=q[2],a.emitLabel(m),b.codegen(a);this.default_case&&(a.emitLabel(h),this.default_case.codegen(a));
a.popBreakLabel();return a.emitLabel(d)};return b}(r);G=function(a){function b(a,b,g){this.step=a;this.condition=b;this.body=g}k(b,a);b.prototype.codegen=function(a){var b,d;d=a.newLabel();b=a.newLabel();a.emitLabel(d);this.condition&&(this.condition.codegen(a),a.emit(new g.Cast("bool")),a.emit(new g.JumpIfZero(b)));this.body.codegen(a);this.step&&this.step.codegen(a);a.emit(new g.Jump(d));return a.emitLabel(b)};return b}(r);a=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}
k(b,a);return b}(D);v=function(a){function b(a,b){this.func_name=a;this.args=b}k(b,a);b.prototype.codegen=function(a){var b,d,e,h;h=this.args;for(d=0,e=h.length;d<e;d++)b=h[d],b.codegen(a);return a.emit(new g.Call(this.func_name,this.args.length))};return b}(a);q=function(a){function b(a){this.identifier=a}k(b,a);b.prototype.codegen=function(a){return a.emit(new g.PushVariable(this.identifier))};return b}(a);F=function(a){function b(a,b){this.base=a;this.index=b}k(b,a);b.prototype.codegen=function(a){this.index.codegen(a);
this.base.codegen(a);return a.emit(new g.GetIndex)};return b}(a);n=function(a){function b(a,b){this.expression=a;this.type=b}k(b,a);b.prototype.codegen=function(a){var b;this.expression.codegen(a);b=function(){switch(this.type){case "NOOB":return"null";case "TROOF":return"bool";case "NUMBR":return"int";case "NUMBAR":return"float";case "YARN":return"string"}}.call(this);return a.emit(new g.Cast(b,true))};return b}(a);p=function(a){function b(a,b){this.operator=a;this.operands=b}k(b,a);b.prototype.codegen=
function(a){var b,d,e,h;this.operands.reverse();h=this.operands;for(d=0,e=h.length;d<e;d++)b=h[d],b.codegen(a);b=function(){switch(this.operator){case "ALL OF":return new g.All(this.operands.length);case "ANY OF":return new g.Any(this.operands.length);case "SMOOSH":return new g.Concat(this.operands.length);default:throw new u("Unknown infinitary operator.");}}.call(this);return a.emit(b)};return b}(a);w=function(a){function b(a,b,g){this.operator=a;this.left=b;this.right=g}k(b,a);b.prototype.codegen=
function(a){var b;this.right.codegen(a);this.left.codegen(a);b=function(){switch(this.operator){case "SUM OF":return new g.Add;case "DIFF OF":return new g.Subtract;case "PRODUKT OF":return new g.Multiply;case "QUOSHUNT OF":return new g.Divide;case "MOD OF":return new g.Modulo;case "BIGGR OF":return new g.Max;case "SMALLR OF":return new g.Min;case "BOTH OF":return new g.And;case "EITHER OF":return new g.Or;case "WON OF":return new g.Xor;case "BOTH SAEM":return new g.Equal;case "DIFFRINT":return new g.Unequal;
default:throw new u("Unknown binary operator.");}}.call(this);return a.emit(b)};return b}(a);N=function(a){function b(a,b){this.operator=a;this.operand=b}k(b,a);b.prototype.codegen=function(a){var b;this.operand.codegen(a);b=function(){switch(this.operator){case "NOT":return new g.Invert;case "LENGZ OF":return new g.GetLength;case "CHARZ OF":return new g.FromCharCode;case "ORDZ OF":return new g.ToCharCode;default:throw new u("Unknown unary operator.");}}.call(this);return a.emit(b)};return b}(a);
A=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}k(b,a);return b}(a);l=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}k(b,a);b.prototype.codegen=function(a){return a.emit(new g.PushLiteral("null",null))};return b}(A);j=function(a){function b(a){this.value=a}k(b,a);b.prototype.codegen=function(a){return a.emit(new g.PushLiteral("bool",this.value))};return b}(A);C=function(a){function b(a){this.value=a}k(b,a);b.prototype.codegen=function(a){return a.emit(new g.PushLiteral("int",
this.value))};return b}(A);d=function(a){function b(a){this.value=a}k(b,a);b.prototype.codegen=function(a){return a.emit(new g.PushLiteral("float",this.value))};return b}(A);L=function(a){function b(a){this.value=a}k(b,a);b.prototype.codegen=function(a){return a.emit(new g.PushLiteral("string",this.value))};return b}(A);this.LOLCoffee.CodeGenError=u;this.LOLCoffee.CodeGenContext=t;this.LOLCoffee.AST={Node:D,Program:I,Statement:r,FunctionDefinition:h,Declaration:i,Return:J,Input:B,Output:H,Assignment:e,
IndexedAssignment:y,Break:x,Loop:G,Conditional:s,Switch:M,StatementList:K,Expression:a,IdentifierExpression:q,IndexingExpression:F,CastExpression:n,CallExpression:v,UnaryExpression:N,BinaryExpression:w,InfinitaryExpression:p,Literal:A,NullLiteral:l,BoolLiteral:j,IntLiteral:C,FloatLiteral:d,StringLiteral:L}}).call(this);
(function(){var e,w,j,x,v,n,t={}.hasOwnProperty,u=function(e,a){function d(){this.constructor=e}for(var h in a)t.call(a,h)&&(e[h]=a[h]);d.prototype=a.prototype;e.prototype=new d;e.__super__=a.prototype;return e},s=[].indexOf||function(e){for(var a=0,d=this.length;a<d;a++)if(a in this&&this[a]===e)return a;return-1};e=this.LOLCoffee.AST;j=this.LOLCoffee.DEFAULT_VALUES;n=this.LOLCoffee.UNARY_OPERATORS;w=this.LOLCoffee.BINARY_OPERATORS;x=this.LOLCoffee.INFINITARY_OPERATORS;v=function(e){function a(a,
e){this.message="Line "+a+": "+e+"."}u(a,e);a.prototype.name="ParserError";return a}(Error);this.LOLCoffee.Parser=function(){function i(a,d){this.tokens=a;this.function_arities=d!=null?d:{};this._scope_depth=0;this._in_function=false}i.prototype.parseProgram=function(){var a;if(!this.tokens.length)return new e.Program(new e.StatementList([]));if(a=this._nextIs("keyword","HAI"))this._consume(),this._nextIs("endline")||this._consume("float","1.2"),this._consume();var d;for(d=[];this.tokens.length&&
!this._nextIs("keyword","KTHXBYE");)d.push(this.parseStatement());this._nextIs("keyword","KTHXBYE")&&(a||this._error("KTHXBYE is not allowed when HAI is not used"),this._consume("keyword","KTHXBYE"),this._consume("endline"));this.tokens.length!==0&&this._error("Unexpected input after program end");return new e.Program(new e.StatementList(d))};i.prototype.parseFunctionDefinition=function(){var a,d,h;this._consume("keyword","HOW DUZ I");h=this._consume("identifier");a=this.parseFunctionArgs();this._consume("endline");
this.function_arities[h]=a.length;this._in_function=true;for(d=[];!this._nextIs("keyword","IF U SAY SO");)d.push(this.parseStatement());d.push(new e.Return(new e.IdentifierExpression("IT")));d=new e.StatementList(d);this._in_function=false;this._consume("keyword","IF U SAY SO");return new e.FunctionDefinition(h,a,d)};i.prototype.parseFunctionArgs=function(){var a;for(a=[];this._nextIs("keyword","YR");)if(this._consume(),a.push(this._consume("identifier")),this._nextIs("keyword","AN"))this._consume();
else break;return a};i.prototype.parseStatement=function(){var a;this._nextIs("keyword","IM IN YR")?a=this.parseLoopStatement():this._nextIs("keyword","O RLY?")?a=this.parseConditionalStatement():this._nextIs("keyword","WTF?")?a=this.parseSwitchStatement():this._nextIs("keyword","I HAS A")?a=this.parseDeclaration():this._nextIs("keyword","GIMMEH")?a=this.parseInputStatement():this._nextIs("keyword","VISIBLE")?a=this.parseOutputStatement():this._nextIs("keyword","PUTZ")?a=this.parseIndexedAssignment():
this._nextIs("keyword","HOW DUZ I")?(this._in_function&&this._error("Cannot define nested functions"),a=this.parseFunctionDefinition()):this._nextIs("keyword","GTFO")?(this._scope_depth>0?a=new e.Break:this._in_function?a=new e.Return(new e.NullLiteral):this._error("GTFO must be inside a loop, switch, or function"),this._consume()):this._nextIs("keyword","FOUND YR")?(this._consume(),this._in_function||this._error("FOUND YR must be inside a function"),a=new e.Return(this.parseExpression())):a=this.tokens.length>=
2&&this._nextIs("identifier")&&this.tokens[1].is("keyword","R")?this.parseAssignment():this.tokens.length>=2&&this._nextIs("identifier")&&this.tokens[1].is("keyword","IS NOW A")?this.parseCastStatement():new e.Assignment("IT",this.parseExpression());this._consume("endline");return a};i.prototype.parseInputStatement=function(){this._consume("keyword","GIMMEH");return new e.Input(this._consume("identifier"))};i.prototype.parseDeclaration=function(){var a,d,h;this._consume("keyword","I HAS A");h=this._consume("identifier");
d=new e.Declaration(h);return this._nextIs("keyword","ITZ")?(this._consume(),this._nextIs("keyword","A")?(this._consume(),a=j[this.parseType()],a=new e.Assignment(h,a)):a=new e.Assignment(h,this.parseExpression()),new e.StatementList([d,a])):d};i.prototype.parseAssignment=function(){var a;a=this._consume("identifier");this._consume("keyword","R");return new e.Assignment(a,this.parseExpression())};i.prototype.parseIndexedAssignment=function(){var a,d,h;this._consume("keyword","PUTZ");h=this.parseExpression();
this._consume("keyword","INTA");a=this._consume("identifier");this._consume("keyword","AT");d=this.parseExpression();return new e.IndexedAssignment(a,d,h)};i.prototype.parseLoopStatement=function(){var a,d,h,q,i,j,p;this._consume("keyword","IM IN YR");h=this._consume("identifier");i=j=null;this._nextIs("endline")||(!this._nextIs("keyword","UPPIN")&&!this._nextIs("keyword","NERFIN")&&!this._nextIs("identifier")&&this._error("A loop operation must follow the loop label"),i=this._consume(),this._consume("keyword",
"YR"),j=this._consume("identifier"),p=new e.IdentifierExpression(j),a=function(){switch(i){case "UPPIN":return new e.BinaryExpression("SUM OF",p,new e.IntLiteral(1));case "NERFIN":return new e.BinaryExpression("DIFF OF",p,new e.IntLiteral(1));default:return this.function_arities[i]!==1&&this._error("Loop operation must be UPPIN, NERFIN or a unary function"),new e.CallExpression(i,[p])}}.call(this),i=new e.Assignment(j,a),this._nextIs("endline")||(this._nextIs("keyword","WILE")?d=false:this._nextIs("keyword",
"TIL")?d=true:this._error("A loop variable must be followed by WILE or TIL"),this._consume(),q=this.parseExpression(),d&&(q=new e.UnaryExpression("NOT",q))));this._consume("endline");this._scope_depth++;a=function(){var a;for(a=[];!this._nextIs("keyword","IM OUTTA YR");)a.push(this.parseStatement());return a}.call(this);a=new e.StatementList(a);this._scope_depth--;this._consume("keyword","IM OUTTA YR");h!==this._consume("identifier")&&this._error("Mismatched loop label");return new e.Loop(i,q,a)};
i.prototype.parseConditionalStatement=function(){var a,d,h,i,y,j,p,B=this;this._consume("keyword","O RLY?");this._consume("endline");this._consume("keyword","YA RLY");this._consume("endline");y=function(){return B._nextIs("keyword","MEBBE")||B._nextIs("keyword","NO WAI")||B._nextIs("keyword","OIC")};i=function(){var a;for(a=[];!y();)a.push(this.parseStatement());return a}.call(this);j=new e.StatementList(i);for(i=[];this._nextIs("keyword","MEBBE");)this._consume(),d=this.parseExpression(),this._consume("endline"),
a=function(){var a;for(a=[];!y();)a.push(this.parseStatement());return a}.call(this),i.push([d,new e.StatementList(a)]);d=[];a=null;this._nextIs("keyword","OIC")||(this._consume("keyword","NO WAI"),this._consume("endline"),(d=function(){var a;for(a=[];!this._nextIs("keyword","OIC");)a.push(this.parseStatement());return a}.call(this))&&(a=new e.StatementList(d)));for(this._consume("keyword","OIC");i.length;)p=i.pop(),d=p[0],h=p[1],d=new e.Assignment("IT",d),a=new e.Conditional(h,a),a=new e.StatementList([d,
a]);return new e.Conditional(j,a)};i.prototype.parseSwitchStatement=function(){var a,d,h,i;this._consume("keyword","WTF?");this._consume("endline");d=[];h=null;for(this._scope_depth++;!this._nextIs("keyword","OIC");)this._nextIs("keyword","OMG")?(this._consume(),a=this.tokens[0].line,i=this.parseLiteral(),i instanceof e.Literal||this._error("OMG value must be a literal",a),this._consume("endline"),a=function(){var a;for(a=[];!this._nextIs("keyword","OMG")&&!this._nextIs("keyword","OMGWTF")&&!this._nextIs("keyword",
"OIC");)a.push(this.parseStatement());return a}.call(this),d.push([i,new e.StatementList(a)])):this._nextIs("keyword","OMGWTF")?(this._consume(),this._consume("endline"),a=function(){var a;for(a=[];!this._nextIs("keyword","OIC");)a.push(this.parseStatement());return a}.call(this),h=new e.StatementList(a)):this._error("Expected OMG, OMGWTF or OIC");this._consume();this._scope_depth--;return new e.Switch(d,h)};i.prototype.parseExpression=function(){var a;return this._nextIs("keyword")?(a=this.tokens[0].text,
a==="MAEK"?this.parseCastExpression():s.call(n,a)>=0?this.parseUnaryExpression():s.call(w,a)>=0?this.parseBinaryExpression():s.call(x,a)>=0?this.parseInfinitaryExpression():a==="WIN"||a==="FAIL"||a==="NOOB"?this.parseLiteral():this._error("Invalid keyword at start of expression")):this._nextIs("identifier")?(a=this.tokens[0].text in this.function_arities?this.parseFunctionCall():new e.IdentifierExpression(this._consume()),this._nextIs("keyword","AT")?(this._consume(),new e.IndexingExpression(a,this.parseExpression())):
a):this.parseLiteral()};i.prototype.parseCastExpression=function(){var a;this._consume("keyword","MAEK");a=this.parseExpression();this._nextIs("keyword","A")&&this._consume();return new e.CastExpression(a,this.parseType())};i.prototype.parseCastStatement=function(){var a,d;d=this._consume("identifier");a=new e.IdentifierExpression(d);this._consume("keyword","IS NOW A");a=new e.CastExpression(a,this.parseType());return new e.Assignment(d,a)};i.prototype.parseType=function(){var a;a=this._consume("keyword");
a in j||this._error("Unknown type");return a};i.prototype.parseLiteral=function(){var a;return this._nextIs("string")?this._createStringLiteral(this._consume()):this._nextIs("int")?new e.IntLiteral(parseInt(this._consume(),10)):this._nextIs("float")?new e.FloatLiteral(parseFloat(this._consume())):this._nextIs("keyword")?(a=this._consume(),a==="WIN"||a==="FAIL"?new e.BoolLiteral(a==="WIN"):a==="NOOB"?new e.NullLiteral:this._error("Unexpected keyword while parsing literal",a.line)):this._error("Could not parse literal")};
i.prototype.parseFunctionCall=function(){var a;a=this._consume("identifier");a in this.function_arities||this._error("Undefined function: "+a);var d,h,i;i=[];for(d=0,h=this.function_arities[a];0<=h?d<h:d>h;0<=h?++d:--d)i.push(this.parseExpression());return new e.CallExpression(a,i)};i.prototype.parseOutputStatement=function(){this._consume("keyword","VISIBLE");var a;for(a=[];!this._nextIs("keyword","!")&&!this._nextIs("endline");)a.push(this.parseExpression());this._nextIs("keyword","!")?this._consume():
a.push(new e.StringLiteral("\n"));return new e.Output(new e.InfinitaryExpression("SMOOSH",a))};i.prototype.parseUnaryExpression=function(){var a;a=this._consume("keyword");s.call(n,a)<0&&this._error("Unknown unary operator: "+a);return new e.UnaryExpression(a,this.parseExpression())};i.prototype.parseBinaryExpression=function(){var a,d,h;d=this._consume("keyword");s.call(w,d)<0&&this._error("Unknown binary operator: "+d);a=this.parseExpression();this._nextIs("keyword","AN")&&this._consume();h=this.parseExpression();
return new e.BinaryExpression(d,a,h)};i.prototype.parseInfinitaryExpression=function(){var a;a=this._consume("keyword");s.call(x,a)<0&&this._error("Unknown infinitary operator: "+a);var d;for(d=[];!this._nextIs("keyword","MKAY")&&!this._nextIs("endline");)this._nextIs("keyword","AN")&&this._consume(),d.push(this.parseExpression());this._nextIs("keyword","MKAY")&&this._consume();return new e.InfinitaryExpression(a,d)};i.prototype._createStringLiteral=function(a){var d,h,i,j,n,p;/^".*"$/.test(a)||this._error("Invalid string literal: "+
a);a=a.slice(1,-1);j=[];d=[];for(i=n=0,p=a.length;n<p;i=++n)if(h=a[i],h===":")switch(h=a[++i],h){case ")":d.push("\n");break;case ">":d.push("\t");break;case "o":d.push("g");break;case '"':d.push('"');break;case ":":d.push(":");break;case "(":h=a.slice(i).match(/\(([\da-fA-F]+)\)/);d.push(String.fromCharCode(parseInt(h[1],16)));break;case "{":h=a.slice(i).match(/\{([a-zA-Z]\w*)\}/);d.length&&j.push(new e.StringLiteral(d.join("")));j.push(new e.IdentifierExpression(h[1]));d=[];break;case "[":this._error("Unicode name embedding not implemented yet: "+
a)}else d.push(h);return j.length?(d.length&&j.push(new e.StringLiteral(d.join(""))),new e.InfinitaryExpression("SMOOSH",j)):new e.StringLiteral(d.join(""))};i.prototype._consume=function(a,d){var e,i;if(!(a!=null||d!=null))return this.tokens.shift().text;if(this._nextIs(a,d))return this._consume();else throw this.tokens.length===0?(i="(last)",e="(end of input)"):(i=this.tokens[0].line,e=""+this.tokens[0].type+"("+this.tokens[0].text+")"),new v(i,"Expected: "+(d!=null?""+a+"('"+(d||"")+"')":a)+"; Got: "+
e);};i.prototype._nextIs=function(a,d){return this.tokens.length&&this.tokens[0].is(a,d)};i.prototype._error=function(a,d){d?a+=", near "+this.tokens[0].type+":'"+this.tokens[0].text+"'":d=this.tokens.length?this.tokens[0].line:d="(last)";throw new v(d,a);};return i}();this.LOLCoffee.ParserError=v}).call(this);
(function(){var e,w,j,x,v,n,t,u,s,i,a,d,h,q,y={}.hasOwnProperty,F=function(a,d){function e(){this.constructor=a}for(var i in d)y.call(d,i)&&(a[i]=d[i]);e.prototype=d.prototype;a.prototype=new e;a.__super__=d.prototype;return a},p=[].indexOf||function(a){for(var d=0,e=this.length;d<e;d++)if(d in this&&this[d]===a)return d;return-1};n=this.LOLCoffee.KEYWORDS;v=/^-?\d+/;w=/^-?(\d+\.\d*|\.\d+)/;j=/^[a-zA-Z]\w*/;s=/^OBTW\b[^]*?\bTLDR\b/;e=/^BTW\b.*/;u=/^(\u2026|\.\.\.)[ \t\v]*(\r\n|\r|\n)/;i=/^(\r\n|\r|\n|,)/;
x=/^[ \t\v]+/;a=/^"(?::(?:[)>o":]|\([\dA-Fa-f]+\)|\{[A-Za-z]\w*\}|\[[^\[\]]+\])|[^":])*"/;n=function(){var a,d,e;e=[];for(a=0,d=n.length;a<d;a++)q=n[a],e.push(q.replace(/\?/g,"\\?").replace(/\s/g,"[ \\t\\v]+"));return e}();t=RegExp("^("+n.join("|")+")(?=$|\\b|\\W)");h=function(a){function d(a,e){this.message="Line "+a+": "+e+"."}F(d,a);d.prototype.name="TokenizerError";return d}(Error);d=function(){function a(d,e,i){this.line=d;this.type=e;this.text=i!=null?i:"";if(p.call(a.prototype.TYPES,e)<0)throw new h(d,
"Invalid token type: "+e);}a.prototype.is=function(a,d){return this.type===a&&(d===void 0||this.text===d)};a.prototype.TYPES="endline,keyword,identifier,int,float,string".split(",");return a}();this.LOLCoffee.Tokenizer=function(){function n(a){this.text=a;this.tokens=[];this.line=[];this.line_index=1}n.prototype.tokenize=function(){for(var d,h;this.text;){if(!(h=this.text.match(x)))if(h=this.text.match(u))i.test(this.text.slice(h[0].length))&&this._error("Cannot have an empty line after line continuation");
else if(h=this.text.match(i))this._flushLine();else if(!(h=this.text.match(e)))(h=this.text.match(s))?this.line.length&&this._error("Multiline comments must start on a new line"):(h=this.text.match(t))?this._emit("keyword",h[0].replace(/\s+/g," ")):(h=this.text.match(j))?this._emit("identifier",h[0]):(h=this.text.match(w))?this._emit("float",h[0]):(h=this.text.match(v))?this._emit("int",h[0]):(h=this.text.match(a))?this._emit("string",h[0]):(d=this.text.match(/^.*/)[0],this._error("Unrecognized sequence at: "+
d));(d=h[0].match(/\r\n|\r|\n/g))&&(this.line_index+=d.length);this.text=this.text.slice(h[0].length)}this._flushLine();return this.tokens};n.prototype._flushLine=function(){if(this.line.length)this.tokens=this.tokens.concat(this.line),this.tokens.push(new d(this.line_index,"endline"));return this.line=[]};n.prototype._emit=function(a,e){return this.line.push(new d(this.line_index,a,e))};n.prototype._error=function(a){throw new h(this.line_index,a);};return n}();this.LOLCoffee.TokenizerError=h}).call(this);
